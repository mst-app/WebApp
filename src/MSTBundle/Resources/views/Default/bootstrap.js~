//Database




function printSchedule()
{
   var line = ["1 Asilomar-Monterey", "2 Pacific Grove-Carmel"];
   var schedule = ["Asilomar", "Monterey Transit Plaza", "Tyler & Franklin", "Aquarium Foam & Irving", "Pacific Grove Lighthouse & Fountain", "Asilomar & Sinex", "Pacific Grove Golf Course", "0",
 "5:47", "--", "5:55", "6:00", "6:08", "6:14", "0",
 "7:02", "--", "7:10", "7:15", "7:23", "7:29", "0",
 "7:20", "--", "7:30", "7:35", "7:43", "--", "0",
 "8:00", "8:01", "8:10", "8:15", "8:23", "8:29", "0",
 "9:00", "--", "9:10", "9:15", "9:23", "9:29", "0",
 "10:00", "10:01", "10:10", "10:15", "10:23", "10:29", "0",
 "11:00", "--", "11:10", "11:15", "11:23", "11:29", "0", 
"12:00", "12:01", "12:10", "12:15", "12:23", "12:29", "0",
 "1:00", "--", "1:10", "1:15", "1:23", "1:29", "0",
 "2:00", "2:01", "2:10", "2:15", "2:23", "2:29", "0",
 "3:00", "--", "3:10", "3:15", "3:23", "3:29", "0",
 "4:00", "4:01", "4:10", "4:15", "4:23", "4:29", "0",
 "5:00", "--", "5:10", "5:15", "5:23", "5:29", "0",
 "6:00", "6:01", "6:10", "6:15", "6:23", "6:29", "0",
 "7:00", "--", "7:10", "7:15", "7:23", "7:29", "0", "0",
 "Monterey", "Pacific Grove Golf Course", "Sally Griffin Senior Center", "Pacific Grove Lighthouse & Fountain", "Aquarium Wave & David", "Tyler & Franklin", "Monterey Transit Plaza", "0",
 "6:14", "6:18", "6:23", "6:28", "6:33", "6:35", "0",
 "--", "--", "6:53", "6:58", "7:05", "7:07", "0",
 "--", "--", "7:24", "7:29", "--", "7:39", "0",
"7:29", "7:33", "7:38", "7:49", "7:50", "7:52", "0",
 "--", "--", "7:53", "7:58", "--", "8:08", "0",
"8:29", "8:33", "8:38", "--", "8:50", "8:52", "0",
"9:29", "9:33", "9:38", "9:43", "9:50", "9:52", "0",
"10:29", "10:33", "10:38", "10:43", "--", "10:52", "0",
"11:29", "11:33", "11:38", "11:43", "11:50", "11:52", "0",
"12:29", "12:33", "12:38", "12:43", "--", "12:52", "0",
"1:29", "1:33", "1:38", "1:43", "1:50", "1:52", "0",
 "2:29", "2:33", "2:38", "2:43", "--", "2:52", "0",
"3:29", "3:33", "3:38", "3:43", "3:50", "3:52", "0",
"4:29", "4:33", "4:38", "4:43", "--", "4:52", "0",
"5:29", "5:33", "5:38", "5:43", "5:50", "5:52", "0",
 "6:29", "6:33", "6:38", "6:43", "--", "6:52", "0",
"7:29", "7:33", "7:38", "7:43", "7:00", "7:52", "0",
 "--", "--", "8:50", "8:55", "--", "9:03", "0",
 "--", "--", "9:50", "9:55", "--", "10:03", "0",
 "--", "--", "10:50", "10:55", "--", "11:03", "0","0",
 "Carmel", "Pacific Grove Fountain & Lighthouse", "Pacific Grove Forest & Forest Hill", "Aquarium Wave & David", "Monterey Transit Plaza", "Del Monte Center", "Carmel 6th & Mission", "0",
 "5:55", "6:05", "6:18", "6:26", "--", "6:39", "0",
 "6:51", "7:03", "7:17", "7:27", "7:33", "7:44", "0", 
"7:51", "8:03", "8:17", "8:27", "8:33", "8:44","0",
"8:51", "9:03", "9:17", "9:27", "9:33", "9:44","0",
"9:51", "10:03", "10:17", "10:27", "10:33", "10:44","0",
"10:51", "11:03", "11:17", "11:27", "11:33", "11:44","0",
"11:51", "12:03", "12:17", "12:27", "12:33", "12:44","0",
 "12:51", "1:03", "1:17", "1:27", "1:33", "1:44","0", 
"1:51", "2:03", "2:17", "2:27", "2:33", "2:44","0",
 "2:51", "3:03", "3:17", "3:27", "3:33", "3:44","0",
 "3:51", "4:03", "4:17", "4:27", "4:33", "4:44","0",
 "4:51", "5:03", "5:17", "5:27", "5:33", "5:44","0",
 "5:51", "6:03", "6:17", "6:27", "6:33", "6:44","0",
 "6:51", "7:03", "7:17", "7:27", "7:33", "7:44","0",
 "8:50", "--", "8:55", "9:03", "--", "--", "0",
 "9:50", "--", "9:55", "10:03", "--", "--", "0",
 "10:50", "--", "10:55", "11:03", "--", "--", "0", "0",
 "Pacific Grove", "Carmel 6th & Mission", "Del Monte Center", "Monterey Transit Plaza", "Aquarium Wave & David", "Pacific Grove Forest & Forest Hill",  "Pacific Grove Fountain & Lighthouse","0",
 "6:02", "--", "6:15", "6:23", "6:29", "6:44", "0",
 "6:50", "7:02", "7:08", "7:18", "7:24", "7:42", "0",
 "7:50", "8:02", "8:08", "8:18", "8:24", "8:42", "0",
 "8:50", "9:02", "9:08", "9:18", "9:24", "9:42", "0",
 "9:50", "10:04", "10:09", "10:18", "10:24", "10:42", "0",
 "10:50", "11:04", "11:09", "11:18", "11:24", "11:42", "0",
 "11:50", "12:04", "12:09", "12:18", "12:24", "12:42", "0",
 "12:50", "1:04", "1:09", "1:18", "1:24", "1:42", "0",
 "1:50", "2:04", "2:09", "2:18", "2:24", "2:42", "0",
 "2:50", "3:04", "3:09", "3:18", "3:24", "3:42", "0",
 "3:50", "4:04", "4:09", "4:18", "4:24", "4:42", "0",
 "4:50", "5:02", "5:08", "5:18", "5:24", "5:42", "0",
 "5:50", "6:02", "6:08", "6:18", "6:24", "6:42", "0",
 "6:50", "7:02", "7:08", "7:18", "7:24", "7:42", "0",
 "7:50", "8:02", "8:08", "8:18", "8:24", "8:42", "0",
 "8:50", "9:02", "9:08", "9:18", "9:24", "9:42", "0",
 "--", "--", "10:15", "10:23", "10:29", "10:44", "0", "0",
 "CHOMP", "Monterey Transit Plaza", "Franklin & Hight", "Via Gayuba & Via Parasio", "CHOMP", "0",
 "7:45", "--", "7:50", "8:05", "0",
 "9:30", "9:35", "9:42", "9:58", "0",
 "11:30", "11:35", "11:42", "11:58", "0",
 "1:30", "1:35", "1:42", "1:58", "0",
 "3:30", "3:35", "3:42", "3:58", "0",
 "5:45", "5:50", "5:57", "6:13", "0",
 "Monterey", "CHOMP", "Del Monte Center", "Monterey Transit Plaza", "0",
 "8:06", "--", "8:15", "0",
 "9:58", "10:04", "10:09", "0",
 "11:58","12:04", "12:09", "0",
 "1:58", "2:04", "2:09", "0",
 "3:58", "4:04", "4:09", "0",
 "6:13", "6:19", "6:24", "0", "0"];
   var place = [0, 263, 519];


   var nbLine = document.getElementById('line').value;
   var nb = nbLine.charCodeAt(0) - 49;
   nb = place[nb];
   
   var print = "";
   for (var i = 0; i < 2; i++)
   {  
      print += "<div class=\".col-xs-6 .col-md-4\"><h2 class=\"sub-header\">Subtitle</h2><div class=\"table-responsive\"><table class=\"table table-bordered\"><caption>" + schedule[nb] + "</caption><thead><tr>";
      nb++;
      while (schedule[nb] != "0")
      {
          print += "<th>" + schedule[nb] + "</th>";
          nb++;
      }
      print += "</tr></thead><tbody><tr>";
      nb++;
      while (schedule[nb] != "0" || schedule[nb+1] !="0")
      {
          if (schedule[nb] == "0")
              print += "</tr><tr>";
          else
              print = print + "<td>" + schedule[nb]+"</td>";
          nb++;
      }
      nb+=2;
      print = print + "</tr></tbody></table></div></div>";
   }
   
   window.alert(print);
   document.querySelector('.print').innerHTML = print;
}

function initMap() 
{ 
    var directionsService = new google.maps.DirectionsService;
    var directionsDisplay = new google.maps.DirectionsRenderer;
    var map = new google.maps.Map(document.getElementById('map'), 
	{ 
	    zoom: 7, 
	    center: {lat: 41.85, lng: -87.65} 
	});
    directionsDisplay.setMap(map);
    var onChangeHandler = function() 
    {
        calculateAndDisplayRoute(directionsService, directionsDisplay);
    };
    document.getElementById('start').addEventListener('change', onChangeHandler);       
    document.getElementById('end').addEventListener('change', onChangeHandler);
}

function calculateAndDisplayRoute(directionsService, directionsDisplay) 
{   
    var Sta = document.getElementById('start').value;
    var En = document.getElementById('end').value;
    if ( Sta == "" || En == "")     
    { 
        return; 
    }
    directionsService.route(
    {
        origin: document.getElementById('start').value, 
        destination: document.getElementById('end').value, 
        travelMode: google.maps.TravelMode.TRANSIT, 
        transitOptions: {
        modes: [google.maps.TransitMode.BUS],
        //routingPreference: google.maps.TransitRoutePreference.FEWER_TRANSFERS
  }
    }, function(response, status) 
    { 
        if (status === google.maps.DirectionsStatus.OK)     
        { 
            printRouteInfo(response);
            //document.querySelector('.results').innerHTML = '';
            window.alert('Directions request  ' + status);
            directionsDisplay.setDirections(response);
            
        } 
        else 
        { 
        window.alert('Directions request failed due to ' + status); 
        } 
    });
 }

function printRouteInfo(response)
{
    var route = response.routes[0].legs[0];
    var step;
    var info = "";
    var info2 = "<p style=\"color: #000000; background-color: #ffffff\">";
    for (var i = 0; i < route.steps.length; i++)
    {
        if(route.steps[i].travel_mode == 'TRANSIT')
        {
            info = info + "....[Bus line: " + route.steps[i].transit.line.short_name;
            info = info + "....Bus departure: " + route.steps[i].transit.departure_stop.name;
            info = info + "....Nb Stop:  " + route.steps[i].transit.num_stops;
            info = info + "]....";

            info2 = info2 + "<font color=\"#FF0000\">BUS: " + route.steps[i].transit.line.short_name;
            info2 = info2 + "</font> at " + route.steps[i].transit.departure_stop.name;
            info2 = info2 + " " + route.steps[i].transit.num_stops;
            info2 = info2 + " stop to <font color=\"#2432df\">" + route.steps[i].transit.arrival_stop.name;
            info2 = info2 + "</font>. <br />";
        }
    }
    info2 = info2 + "</font> </p>";
    document.getElementById('Answer').value = info;
    document.querySelector('.results').innerHTML = info2;
}


